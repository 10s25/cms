[(#REM)
Slider des derni√®res vid√©os publi√©es sur le site
]
<head>
<INCLURE{fond=inclure/static_head}
{css=/local/slider_last_videos.css}>
</head>

[(#REM) Slider des derni√®res vid√©os publi√©es ]
<B_videos>
    <div class="slider-videos-container">
        <button class="slider-btn prev">‚Äπ</button>

        <div class="slider-videos">
            <BOUCLE_videos(DOCUMENTS)
            {extension IN html,mp4,webm,ogv}
            {oembed!=''}
            {statut==publie}
            {!par date}
            {0,3}>
            <div class="slide">
                <div class="video-container">
                    [(#MODELE{emb, id_document=#ID_DOCUMENT, async=non, largeur=800, hauteur=450})]
                </div>
            </div>
            </BOUCLE_videos>
        </div>

        <button class="slider-btn next">‚Ä∫</button>
    </div>
</B_videos>
<p>Aucune vid√©o pour le moment.</p>
<//B_videos>

<script>
    function initSliderVideos() {
        const slider = document.querySelector('.slider-videos');
        if (!slider) {
            console.warn('‚è≥ Slider pas encore charg√© ‚Äî nouvel essai dans 300ms');
            return setTimeout(initSliderVideos, 300);
        }

        console.log('‚úÖ Slider d√©tect√©, initialisation en cours...');

        const slides = slider.querySelectorAll('.slide');
        const next = document.querySelector('.slider-btn.next');
        const prev = document.querySelector('.slider-btn.prev');
        let index = 0;

        function showSlide(i) {
            index = (i + slides.length) % slides.length;
            slider.style.transform = `translateX(-${index * 100}%)`;
        }

        next?.addEventListener('click', () => {
            showSlide(index + 1);
            console.log('‚û°Ô∏è Slide suivant');
        });

        prev?.addEventListener('click', () => {
            showSlide(index - 1);
            console.log('‚¨ÖÔ∏è Slide pr√©c√©dent');
        });

        // üñ±Ô∏è (optionnel) clic sur vid√©o ‚Äî juste un log d‚Äôinfo
        slider.addEventListener('click', (e) => {
            const videoDiv = e.target.closest('.video-container');
            if (videoDiv) {
                console.log('üé• Clic sur une vid√©o');
            }
        });

        showSlide(0); // affiche la premi√®re vid√©o au chargement
    }

    window.addEventListener('load', initSliderVideos);
</script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.video-container iframe').forEach(iframe => {
            const w = parseInt(iframe.getAttribute('width') || 0);
            const h = parseInt(iframe.getAttribute('height') || 0);
            if (h > w) {
                iframe.closest('.video-container')?.setAttribute('data-vertical', 'true');
            }
        });
    });
</script>
